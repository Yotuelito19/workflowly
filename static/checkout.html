<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Compra - WorkFlowly</title>
    <link rel="stylesheet" href="checkout.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <a href="/" class="logo">
                    <div class="logo-circle">
                        <span>W</span>
                    </div>
                    <span class="brand-name">WorkFlowly</span>
                </a>
            </div>
            <div class="header-security">
                <i class="fas fa-shield-alt"></i>
                <span>Compra segura SSL</span>
            </div>
        </div>
    </header>

    <!-- Progress Steps -->
    <section class="progress-section">
        <div class="container">
            <div class="progress-steps">
                <div class="step completed">
                    <div class="step-number">1</div>
                    <span>Selección</span>
                </div>
                <div class="step active">
                    <div class="step-number">2</div>
                    <span>Datos</span>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <span>Pago</span>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <span>Confirmación</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="checkout-content">
        <div class="container">
            <div class="checkout-layout">
                <!-- Checkout Form -->
                <main class="checkout-form">
                    <!-- Customer Information -->
                    <div class="form-section">
                        <div class="section-header">
                            <h2><i class="fas fa-user"></i> Información del comprador</h2>
                            <p>Estos datos aparecerán en tus entradas</p>
                        </div>
                        
                        <form class="customer-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">Nombre *</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Apellidos *</label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Correo electrónico *</label>
                                    <input type="email" id="email" name="email" required>
                                    <small>Aquí recibirás tus entradas</small>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Teléfono *</label>
                                    <input type="tel" id="phone" name="phone" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="dni">DNI/NIE *</label>
                                <input type="text" id="dni" name="dni" required placeholder="12345678A">
                                <small>Necesario para acceder al evento</small>
                            </div>
                            
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="newsletter">
                                    <span class="checkmark"></span>
                                    Quiero recibir información sobre eventos similares
                                </label>
                            </div>
                        </form>
                    </div>

                    <!-- Attendees Information -->
                    <div class="form-section">
                        <div class="section-header">
                            <h2><i class="fas fa-users"></i> Información de asistentes</h2>
                            <p>Datos de las personas que asistirán al evento</p>
                        </div>
                        
                        <div class="attendees-list">
                            <div class="attendee-item">
                                <div class="attendee-header">
                                    <h3>Entrada General #1</h3>
                                    <span class="same-as-buyer">
                                        <input type="checkbox" id="sameAsBuyer1" checked>
                                        <label for="sameAsBuyer1">Mismo que comprador</label>
                                    </span>
                                </div>
                                <div class="attendee-form" style="display: none;">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Nombre</label>
                                            <input type="text" name="attendee1_name">
                                        </div>
                                        <div class="form-group">
                                            <label>Apellidos</label>
                                            <input type="text" name="attendee1_surname">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>DNI/NIE</label>
                                        <input type="text" name="attendee1_dni">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="attendee-item">
                                <div class="attendee-header">
                                    <h3>Entrada General #2</h3>
                                    <span class="same-as-buyer">
                                        <input type="checkbox" id="sameAsBuyer2">
                                        <label for="sameAsBuyer2">Mismo que comprador</label>
                                    </span>
                                </div>
                                <div class="attendee-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Nombre</label>
                                            <input type="text" name="attendee2_name" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Apellidos</label>
                                            <input type="text" name="attendee2_surname" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>DNI/NIE</label>
                                        <input type="text" name="attendee2_dni" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="form-section">
                        <div class="section-header">
                            <h2><i class="fas fa-credit-card"></i> Método de pago</h2>
                            <p>Selecciona cómo quieres pagar tus entradas</p>
                        </div>
                        
                        <div class="payment-methods">
                            <div class="payment-option">
                                <input type="radio" id="card" name="payment" value="card" checked>
                                <label for="card" class="payment-label">
                                    <div class="payment-icon">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <div class="payment-info">
                                        <strong>Tarjeta de crédito/débito</strong>
                                        <span>Visa, Mastercard, American Express</span>
                                    </div>
                                    <div class="payment-logos">
                                        <i class="fab fa-cc-visa"></i>
                                        <i class="fab fa-cc-mastercard"></i>
                                        <i class="fab fa-cc-amex"></i>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="payment-option">
                                <input type="radio" id="paypal" name="payment" value="paypal">
                                <label for="paypal" class="payment-label">
                                    <div class="payment-icon">
                                        <i class="fab fa-paypal"></i>
                                    </div>
                                    <div class="payment-info">
                                        <strong>PayPal</strong>
                                        <span>Paga de forma rápida y segura</span>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="payment-option">
                                <input type="radio" id="bizum" name="payment" value="bizum">
                                <label for="bizum" class="payment-label">
                                    <div class="payment-icon">
                                        <i class="fas fa-mobile-alt"></i>
                                    </div>
                                    <div class="payment-info">
                                        <strong>Bizum</strong>
                                        <span>Pago instantáneo desde tu móvil</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Card Form -->
                        <div class="card-form" id="cardForm">
                            <div class="form-group">
                                <label for="cardNumber">Número de tarjeta *</label>
                                <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                                <div class="card-icons">
                                    <i class="fab fa-cc-visa"></i>
                                    <i class="fab fa-cc-mastercard"></i>
                                    <i class="fab fa-cc-amex"></i>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expiryDate">Fecha de caducidad *</label>
                                    <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/AA" maxlength="5">
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV *</label>
                                    <input type="text" id="cvv" name="cvv" placeholder="123" maxlength="4">
                                    <div class="cvv-help">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltip">3 dígitos en el reverso de la tarjeta</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="cardName">Nombre del titular *</label>
                                <input type="text" id="cardName" name="cardName" placeholder="Como aparece en la tarjeta">
                            </div>
                        </div>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="form-section">
                        <div class="terms-section">
                            <div class="terms-group">
                                <label class="checkbox-label required">
                                    <input type="checkbox" name="terms" required>
                                    <span class="checkmark"></span>
                                    Acepto los <a href="#" target="_blank">términos y condiciones</a> y la <a href="#" target="_blank">política de privacidad</a>
                                </label>
                            </div>
                            
                            <div class="terms-group">
                                <label class="checkbox-label required">
                                    <input type="checkbox" name="eventTerms" required>
                                    <span class="checkmark"></span>
                                    Acepto las condiciones específicas del evento y las políticas de cancelación
                                </label>
                            </div>
                            
                            <div class="anti-resale-notice">
                                <div class="notice-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="notice-content">
                                    <strong>Política anti-reventa</strong>
                                    <p>Las entradas son nominativas y no transferibles. La reventa está prohibida y puede resultar en la anulación de las entradas sin reembolso.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-actions">
                        <button type="button" class="btn-back">
                            <i class="fas fa-arrow-left"></i>
                            Volver al evento
                        </button>
                        <button type="submit" class="btn-continue">
                            Finalizar compra
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </main>

                <!-- Order Summary -->
                <aside class="order-summary">
                    <div class="summary-card">
                        <div class="summary-header">
                            <h3>Resumen del pedido</h3>
                        </div>
                        
                        <div class="event-info">
                            <div class="event-image"></div>
                            <div class="event-details">
                                <h4>Festival Summer Vibes 2025</h4>
                                <div class="event-meta">
                                    <span><i class="fas fa-calendar"></i> 15 Jun 2025, 20:00</span>
                                    <span><i class="fas fa-map-marker-alt"></i> WiZink Center, Madrid</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tickets-summary">
                            <div class="ticket-item">
                                <div class="ticket-info">
                                    <span class="ticket-type">Entrada General</span>
                                    <span class="ticket-quantity">x2</span>
                                </div>
                                <span class="ticket-price">70,00€</span>
                            </div>
                        </div>
                        
                        <div class="summary-breakdown">
                            <div class="breakdown-item">
                                <span>Subtotal entradas:</span>
                                <span>70,00€</span>
                            </div>
                            <div class="breakdown-item">
                                <span>Gastos de gestión:</span>
                                <span>6,00€</span>
                            </div>
                            <div class="breakdown-item discount">
                                <span>Descuento WorkFlowly:</span>
                                <span>-3,00€</span>
                            </div>
                            <div class="breakdown-total">
                                <span>Total:</span>
                                <span>73,00€</span>
                            </div>
                        </div>
                        
                        <div class="summary-benefits">
                            <h4>✓ Con tu compra incluyes:</h4>
                            <ul>
                                <li>Entrada digital QR</li>
                                <li>Soporte 24/7</li>
                                <li>Garantía anti-reventa</li>
                                <li>Reembolso hasta 48h antes</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="security-badges">
                        <div class="security-item">
                            <i class="fas fa-shield-alt"></i>
                            <div>
                                <strong>Compra 100% segura</strong>
                                <small>Certificado SSL 256-bit</small>
                            </div>
                        </div>
                        <div class="security-item">
                            <i class="fas fa-lock"></i>
                            <div>
                                <strong>Datos protegidos</strong>
                                <small>Cumplimos con RGPD</small>
                            </div>
                        </div>
                        <div class="security-item">
                            <i class="fas fa-headset"></i>
                            <div>
                                <strong>Soporte inmediato</strong>
                                <small>Chat 24/7 disponible</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="trust-seals">
                        <div class="seal">SSL</div>
                        <div class="seal">GDPR</div>
                        <div class="seal">PCI DSS</div>
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- Footer -->
<footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo">
                        <div class="logo-circle">
                            <span>W</span>
                        </div>
                        <span class="brand-name">WorkFlowly</span>
                    </div>
                    <p>Tu plataforma de confianza para comprar entradas sin reventa.</p>
                </div>
                <div class="footer-section">
                    <h4>Enlaces útiles</h4>
                    <ul>
                        <li><a href="#">Sobre nosotros</a></li>
                        <li><a href="#">Cómo funciona</a></li>
                        <li><a href="#">Ayuda</a></li>
                        <li><a href="#">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Términos y condiciones</a></li>
                        <li><a href="#">Política de privacidad</a></li>
                        <li><a href="#">Política de cookies</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Síguenos</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 WorkFlowly. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Format card number input
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            if (formattedValue !== e.target.value) {
                e.target.value = formattedValue;
            }
        });

        // Format expiry date input
        document.getElementById('expiryDate').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });

        // CVV input
        document.getElementById('cvv').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
        });

        // Same as buyer checkbox functionality
        document.querySelectorAll('.same-as-buyer input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const attendeeForm = this.closest('.attendee-item').querySelector('.attendee-form');
                if (this.checked) {
                    attendeeForm.style.display = 'none';
                    attendeeForm.querySelectorAll('input').forEach(input => input.required = false);
                } else {
                    attendeeForm.style.display = 'block';
                    attendeeForm.querySelectorAll('input').forEach(input => input.required = true);
                }
            });
        });

        // Payment method selection
        document.querySelectorAll('input[name="payment"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const cardForm = document.getElementById('cardForm');
                if (this.value === 'card') {
                    cardForm.style.display = 'block';
                } else {
                    cardForm.style.display = 'none';
                }
            });
        });

        // Form submission
        document.querySelector('.btn-continue').addEventListener('click', function(e) {
            e.preventDefault();
            
            // Basic validation
            const requiredFields = document.querySelectorAll('input[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = '#FF6B6B';
                } else {
                    field.style.borderColor = '';
                }
            });
            
            if (isValid) {
                // Simulate processing
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Procesando...';
                this.disabled = true;
                
                setTimeout(() => {
                    window.location.href = '/confirmation';
                }, 2000);
            } else {
                alert('Por favor, completa todos los campos requeridos.');
            }
        });
    </script>
</body>
</html>